(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Goods-Add"],{"210e":function(t,e,a){"use strict";var o=a("8789"),r=a.n(o);r.a},"3ca3":function(t,e,a){"use strict";var o=a("6547").charAt,r=a("69f3"),n=a("7dd0"),i="String Iterator",s=r.set,l=r.getterFor(i);n(String,"String",(function(t){s(this,{type:i,string:String(t),index:0})}),(function(){var t,e=l(this),a=e.string,r=e.index;return r>=a.length?{value:void 0,done:!0}:(t=o(a,r),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,a){"use strict";var o=a("f8c2"),r=a("7b0b"),n=a("9bdd"),i=a("e95a"),s=a("50c4"),l=a("8418"),c=a("35a1");t.exports=function(t){var e,a,d,u,f,m=r(t),p="function"==typeof this?this:Array,g=arguments.length,b=g>1?arguments[1]:void 0,h=void 0!==b,v=0,_=c(m);if(h&&(b=o(b,g>2?arguments[2]:void 0,2)),void 0==_||p==Array&&i(_))for(e=s(m.length),a=new p(e);e>v;v++)l(a,v,h?b(m[v],v):m[v]);else for(u=_.call(m),f=u.next,a=new p;!(d=f.call(u)).done;v++)l(a,v,h?n(u,b,[d.value,v],!0):d.value);return a.length=v,a}},5542:function(t,e,a){"use strict";a.d(e,"e",(function(){return r})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return l}));var o=a("b775");function r(t){return Object(o["a"])({url:"/goods",method:"get",params:t})}function n(t){return Object(o["a"])({url:"/goods/".concat(t),method:"get",params:t})}function i(t){return Object(o["a"])({url:"/goods",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/goods/".concat(t.id),method:"put",data:t})}function l(t){return Object(o["a"])({url:"/goods/".concat(t.id),method:"delete"})}},"66d6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("添加商品")])],1),a("el-card",[a("el-row",{staticClass:"mb-20"},[a("el-alert",{attrs:{center:"",type:"info",title:"注意：只允许为第 三级分类设置相关参数！","show-icon":"",closable:!1}})],1),a("el-row",{staticClass:"mb-20"},[a("el-steps",{attrs:{"align-center":"",active:t.activeIndex-0,"finish-status":"success"}},[t._l(t.stepList,(function(t,e){return a("el-step",{key:e,attrs:{title:t}})})),a("el-step",{attrs:{title:"完成"}})],2)],1),a("el-row",[a("el-form",{ref:"formData",attrs:{model:t.formData,"label-width":"100px",rules:t.rules,"label-position":"top"}},[a("el-tabs",{attrs:{"tab-position":"left","before-leave":t.beforeTabLeave},on:{"tab-click":t.clickTab},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.stepList,(function(e,o){return a("el-tab-pane",{key:o,attrs:{label:e,name:o+""}},["0"===t.activeIndex?a("el-col",[a("el-form-item",{attrs:{label:"商品名称",prop:"goods_name"}},[a("el-input",{model:{value:t.formData.goods_name,callback:function(e){t.$set(t.formData,"goods_name",e)},expression:"formData.goods_name"}})],1),a("el-form-item",{attrs:{label:"商品价格",prop:"goods_price"}},[a("el-input",{attrs:{type:"number"},model:{value:t.formData.goods_price,callback:function(e){t.$set(t.formData,"goods_price",e)},expression:"formData.goods_price"}})],1),a("el-form-item",{attrs:{label:"商品重量",prop:"goods_weight"}},[a("el-input",{attrs:{type:"number"},model:{value:t.formData.goods_weight,callback:function(e){t.$set(t.formData,"goods_weight",e)},expression:"formData.goods_weight"}})],1),a("el-form-item",{attrs:{label:"商品数量",prop:"goods_number"}},[a("el-input",{attrs:{type:"number"},model:{value:t.formData.goods_number,callback:function(e){t.$set(t.formData,"goods_number",e)},expression:"formData.goods_number"}})],1),a("el-form-item",{attrs:{label:"商品分类",prop:"goods_cat"}},[a("el-cascader",{attrs:{filterable:"",options:t.cateList,props:{value:"cat_id",label:"cat_name"},"show-all-levels":!1},on:{change:t.handleChange},model:{value:t.formData.goods_cat,callback:function(e){t.$set(t.formData,"goods_cat",e)},expression:"formData.goods_cat"}})],1)],1):t._e(),"1"===t.activeIndex?a("el-col",t._l(t.manyTableList,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-checkbox-group",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}},t._l(e.attr_vals,(function(t,e){return a("el-checkbox",{key:e,attrs:{border:"",label:t}})})),1)],1)})),1):t._e(),"2"===t.activeIndex?a("el-col",t._l(t.onlyTableList,(function(e){return a("el-form-item",{key:e.attr_id,attrs:{label:e.attr_name}},[a("el-input",{model:{value:e.attr_vals,callback:function(a){t.$set(e,"attr_vals",a)},expression:"item.attr_vals"}})],1)})),1):t._e(),"3"===t.activeIndex?a("el-col",[a("el-form-item",[a("el-upload",{attrs:{action:t.uploadURL,headers:t.headers,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1):t._e(),"4"===t.activeIndex?a("el-col",[a("el-form-item",[a("quill-editor",{attrs:{content:t.formData.goods_introduce},on:{change:function(e){return t.onEditorChange(e)}}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("formData")}}},[t._v("添加")])],1)],1):t._e()],1)})),1)],1)],1)],1),t.dialog.show?a("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialog.show,"close-on-click-modal":!1,top:"10vh",width:"50%"},on:{"update:visible":function(e){return t.$set(t.dialog,"show",e)}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialog.data,alt:""}})]):t._e()],1)},r=[],n=(a("c740"),a("a630"),a("a15b"),a("a434"),a("3ca3"),a("1276"),a("159b"),a("5542")),i=a("0221"),s=a("2c33"),l=a("ed08"),c={goods_name:"",goods_price:0,goods_weight:0,goods_number:0,goods_cat:[],attrs:[],pics:[],goods_introduce:""},d={data:function(){return{uploadURL:"http://127.0.0.1:8888/api/private/v1/upload",headers:{Authorization:window.sessionStorage.getItem("token")},nowId:"",cateList:[],manyTableList:[],onlyTableList:[],content:"",formData:{},dialog:{show:!1,data:"",title:"查看图片"},rules:{goods_name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],goods_price:[{required:!0,message:"请输入商品价格",trigger:"blur"}],goods_weight:[{required:!0,message:"请输入商品重量",trigger:"blur"}],goods_number:[{required:!0,message:"请输入商品数量",trigger:"blur"}]},activeIndex:"0",stepList:["基本信息","商品参数","商品属性","商品图片","商品内容"]}},mounted:function(){var t=this;this.nowId=this.$route.query.id-0||"",Object(i["e"])().then((function(e){var a=e.data;t.cateList=a.data})),this.nowId?Object(n["d"])(this.nowId).then((function(e){var a=e.data;t.formData=Object(l["c"])(a.data),t.formData.goods_cat=Array.from(t.formData.goods_cat.split(","),(function(t){return 1*t}))})):this.formData=Object(l["c"])(c)},methods:{onEditorChange:function(t){t.quill;var e=t.html;t.text;this.content=e},handleSuccess:function(t){this.formData.pics.push({pic:t.data.tmp_path})},handleRemove:function(t){var e=this.formData.pics.findIndex((function(e){e.pic,t.response.data.tmp_path}));this.formData.pics.splice(e,1)},handlePreview:function(t){this.dialog.show=!0,this.dialog.data=t.response.data.url},clickTab:function(){var t=this;"1"===this.activeIndex?Object(s["d"])({sel:"many",id:this.formData.goods_cat[this.formData.goods_cat.length-1]}).then((function(e){var a=e.data;a.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[]})),t.manyTableList=a.data})):"2"===this.activeIndex&&Object(s["d"])({sel:"only",id:this.formData.goods_cat[this.formData.goods_cat.length-1]}).then((function(e){var a=e.data;a.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[]})),t.onlyTableList=a.data}))},beforeTabLeave:function(t,e){if("0"===e&&this.formData.goods_cat.length-1<0)return this.$message.error("请先选择商品分类"),!1},handleChange:function(t){t&&t.length-1<0&&(this.formData.goods_cat=[])},resetForm:function(t){this.$refs[t].resetFields()},submitForm:function(t){var e=this,a=Object(l["c"])(this.formData);a.goods_introduce=this.content,a.goods_cat=a.goods_cat.join(","),this.manyTableList.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals.join(",")};a.attrs.push(e)})),this.onlyTableList.forEach((function(t){var e={attr_id:t.attr_id,attr_value:t.attr_vals.join(",")};a.attrs.push(e)})),this.$refs[t].validate((function(t){if(t){var o=e.nowId?n["c"]:n["a"];o(a).then((function(t){e.$message.success(t.data.meta.msg),e.$emit("editEmit")}))}}))}}},u=d,f=(a("210e"),a("2877")),m=Object(f["a"])(u,o,r,!1,null,"722f6305",null);e["default"]=m.exports},"82d9":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品列表")])],1),a("el-card",[a("el-row",{staticClass:"mb-20",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getList},model:{value:t.params.query,callback:function(e){t.$set(t.params,"query",e)},expression:"params.query"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getList},slot:"append"})],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary"},on:{click:t.doCreate}},[t._v("添加商品")])],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{data:t.goodList,"highlight-current-row":"",border:"",height:t.tableHeight}},[a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称","min-width":"320","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格（元）","min-width":"90"}}),a("el-table-column",{attrs:{prop:"goods_number",label:"商品数量","min-width":"80"}}),a("el-table-column",{attrs:{prop:"goods_weight",label:"商品重量","min-width":"80"}}),a("el-table-column",{attrs:{prop:"upd_time",label:"更新时间","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[t._v(" "+t._s(t._f("dataFormat")(e.row.upd_time))+" ")])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return t.doEdit(e.row)}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.doRemove(e.row)}}})]}}])})],1)],1)],1),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:24}},[a("el-pagination",{attrs:{"current-page":t.params.pagenum,"page-sizes":t.pageSizeType,"page-size":t.params.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)},r=[],n=a("5542"),i={name:"goods",data:function(){return{params:{query:"",pagenum:1,pagesize:10},goodList:[]}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(n["e"])(this.params).then((function(e){var a=e.data;t.goodList=a.data.goods,t.pagination.total=a.data.total}))},doCreate:function(){this.$router.push("/goods/add")},doEdit:function(t){this.$router.push({path:"/goods/add",query:{id:t.goods_id}})},doRemove:function(t){var e=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(n["b"])({id:t.goods_id}).then((function(t){e.$message({type:"success",message:t.data.meta.msg}),e.getList()}))}))},editEmit:function(t){this.dialog[t].show=!1,this.getList()}}},s=i,l=a("2877"),c=Object(l["a"])(s,o,r,!1,null,null,null);e["default"]=c.exports},8789:function(t,e,a){},a630:function(t,e,a){var o=a("23e7"),r=a("4df4"),n=a("1c7e"),i=!n((function(t){Array.from(t)}));o({target:"Array",stat:!0,forced:i},{from:r})},c740:function(t,e,a){"use strict";var o=a("23e7"),r=a("b727").findIndex,n=a("44d2"),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),o({target:"Array",proto:!0,forced:s},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(i)},d28b:function(t,e,a){var o=a("746f");o("iterator")},ddb0:function(t,e,a){var o=a("da84"),r=a("fdbc"),n=a("e260"),i=a("9112"),s=a("b622"),l=s("iterator"),c=s("toStringTag"),d=n.values;for(var u in r){var f=o[u],m=f&&f.prototype;if(m){if(m[l]!==d)try{i(m,l,d)}catch(g){m[l]=d}if(m[c]||i(m,c,u),r[u])for(var p in n)if(m[p]!==n[p])try{i(m,p,n[p])}catch(g){m[p]=n[p]}}}},e01a:function(t,e,a){"use strict";var o=a("23e7"),r=a("83ab"),n=a("da84"),i=a("5135"),s=a("861d"),l=a("9bf2").f,c=a("e893"),d=n.Symbol;if(r&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};c(f,d);var m=f.prototype=d.prototype;m.constructor=f;var p=m.toString,g="Symbol(test)"==String(d("test")),b=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(i(u,t))return"";var a=g?e.slice(7,-1):e.replace(b,"$1");return""===a?void 0:a}}),o({global:!0,forced:!0},{Symbol:f})}},ed08:function(t,e,a){"use strict";a("b64b"),a("159b"),a("a4d3"),a("e01a"),a("d28b"),a("e260"),a("d3b7"),a("3ca3"),a("ddb0");function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t){return r="function"===typeof Symbol&&"symbol"===o(Symbol.iterator)?function(t){return o(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":o(t)},r(t)}function n(t,e,a){var o=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;o.test(e)?a():a(new Error("请输入正确邮箱"))}function i(t,e,a){var o=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/;o.test(e)?a():a(new Error("手机号码格式不正确"))}function s(t){if(!t&&"object"!==r(t))throw new Error("error arguments","shallowClone");var e=t.constructor===Array?[]:{};return Object.keys(t).forEach((function(a){t[a]&&"object"===r(t[a])?(e[a]=t[a].constructor===Array?[]:{},e[a]=s(t[a])):e[a]=t[a]})),e}a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s}))}}]);
//# sourceMappingURL=Goods-Add.7f065e46.js.map