(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Cate-Params"],{"172f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("参数列表")])],1),a("el-card",[a("el-row",{staticClass:"mb-20",attrs:{gutter:20}},[a("el-alert",{attrs:{type:"warning",title:"注意：只允许为第三级分类设置相关参数！","show-icon":"",closable:!1}})],1),a("el-row",{staticClass:"mb-20",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"mr-10"},[t._v("选择商品分类：")]),a("el-cascader",{attrs:{filterable:"",options:t.cateList,props:{value:"cat_id",label:"cat_name"},"show-all-levels":!1},on:{change:t.handleChange},model:{value:t.cat_id,callback:function(e){t.cat_id=e},expression:"cat_id"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-tabs",{on:{"tab-click":t.getList},model:{value:t.activeSel,callback:function(e){t.activeSel=e},expression:"activeSel"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many",disabled:!t.cat_id}}),a("el-tab-pane",{attrs:{label:"静态参数",name:"only",disabled:!t.cat_id}})],1)],1),a("el-col",{staticClass:"mb-10",attrs:{span:24}},[a("el-button",{attrs:{type:"primary",disabled:!t.cat_id},on:{click:t.doCreate}},[t._v("添加参数")])],1),a("el-col",{attrs:{span:24}},[a("el-table",{attrs:{data:t.paramsList,"highlight-current-row":"",border:"",height:t.tableHeight}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(i,n){return a("el-tag",{key:n,staticClass:"mr-10",attrs:{closable:""},on:{close:function(a){return t.doRemoveRight(e.row,i)}}},[t._v(" "+t._s(i))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticStyle:{width:"120px"},attrs:{size:"mini"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{prop:"attr_name",label:"分类参数名称","min-width":"120"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return t.doEdit("edit",e.row,"编辑参数")}}}),a("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.doRemove(e.row)}}})]}}])})],1)],1)],1)],1),t.dialog.edit.show?a("el-dialog",{attrs:{title:t.dialog.edit.title,visible:t.dialog.edit.show,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialog.edit,"show",e)}}},[a("edit-params",{attrs:{model:t.dialog.edit.data},on:{editEmit:function(e){return t.editEmit("edit")},close:function(e){t.dialog.edit.show=!1}}})],1):t._e()],1)},n=[],r=(a("a4d3"),a("4de4"),a("c975"),a("a15b"),a("a434"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("1276"),a("159b"),a("ade3")),s=a("2c33"),l=a("0221");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(r["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={name:"users",data:function(){return{inputVisible:!1,inputValue:"",activeSel:"many",cat_id:null,cateList:[],paramsList:[],dialog:{edit:{title:"",data:{},show:!1}}}},components:{"edit-params":function(){return a.e("chunk-51917268").then(a.bind(null,"cbae"))}},mounted:function(){var t=this;Object(l["e"])().then((function(e){var a=e.data;t.cateList=a.data}))},methods:{doRemoveRight:function(t,e){var a=this;t.attr_vals.splice(t.attr_vals.indexOf(e),1),Object(s["c"])({id:this.cat_id,attrId:t.attr_id,attr_name:t.attr_name,attr_sel:this.activeSel,attr_vals:t.attr_vals.join(" ")}).then((function(t){200===t.data.meta.status&&a.$message.success("参数删除成功！")}))},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(t){var e=this,a=t.inputValue;a&&t.attr_vals.push(a),t.inputVisible=!1,t.inputValue="",Object(s["c"])({id:this.cat_id,attrId:t.attr_id,attr_name:t.attr_name,attr_sel:this.activeSel,attr_vals:t.attr_vals.join(" ")}).then((function(t){200===t.data.meta.status&&e.$message.success("参数修改成功！")}))},handleChange:function(t){t&&t.length-1>=0?(this.cat_id=t[t.length-1],this.getList(),t=null):this.cat_id=null},getList:function(){var t=this;Object(s["d"])({sel:this.activeSel,id:this.cat_id}).then((function(e){var a=e.data;a.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.inputVisible=!1,t.inputValue=""})),t.paramsList=a.data}))},doCreate:function(){this.dialog.edit.show=!0,this.dialog.edit.data={attr_sel:this.activeSel,id:this.cat_id},this.dialog.edit.title="创建参数"},doEdit:function(t,e,a){this.dialog[t].show=!0,this.dialog[t].data=c({attr_sel:this.activeSel,id:this.cat_id},e),this.dialog[t].title=a},doRemove:function(t){var e=this;this.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])({id:t.cat_id,attrid:t.attr_id}).then((function(t){e.$message({type:"success",message:t.data.meta.msg}),e.getList()}))}))},editEmit:function(t){this.dialog[t].show=!1,this.getList()}}},d=u,f=a("2877"),p=Object(f["a"])(d,i,n,!1,null,null,null);e["default"]=p.exports},ade3:function(t,e,a){"use strict";function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return i}))},c975:function(t,e,a){"use strict";var i=a("23e7"),n=a("4d64").indexOf,r=a("b301"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,o=r("indexOf");i({target:"Array",proto:!0,forced:l||o},{indexOf:function(t){return l?s.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,a){var i=a("23e7"),n=a("83ab"),r=a("56ef"),s=a("fc6a"),l=a("06cf"),o=a("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,i=s(t),n=l.f,c=r(i),u={},d=0;while(c.length>d)a=n(i,e=c[d++]),void 0!==a&&o(u,e,a);return u}})},e439:function(t,e,a){var i=a("23e7"),n=a("d039"),r=a("fc6a"),s=a("06cf").f,l=a("83ab"),o=n((function(){s(1)})),c=!l||o;i({target:"Object",stat:!0,forced:c,sham:!l},{getOwnPropertyDescriptor:function(t,e){return s(r(t),e)}})}}]);
//# sourceMappingURL=Cate-Params.918920aa.js.map