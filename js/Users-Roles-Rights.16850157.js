(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Users-Roles-Rights"],{"0630":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v("用户管理")]),n("el-breadcrumb-item",[t._v("用户列表")])],1),n("el-card",[n("el-row",{staticClass:"mb-20",attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("el-input",{attrs:{placeholder:"搜索姓名",clearable:""},on:{clear:t.getList},model:{value:t.params.query,callback:function(e){t.$set(t.params,"query",e)},expression:"params.query"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getList},slot:"append"})],1)],1),n("el-col",{attrs:{span:8}},[n("el-button",{attrs:{type:"primary"},on:{click:t.doCreate}},[t._v("添加用户")])],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{attrs:{data:t.userList,"highlight-current-row":"",border:"",height:t.tableHeight}},[n("el-table-column",{attrs:{prop:"username",label:"姓名","min-width":"120"}}),n("el-table-column",{attrs:{prop:"mobile",label:"电话","min-width":"120"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"120"}}),n("el-table-column",{attrs:{prop:"role_name",label:"角色","min-width":"120"}}),n("el-table-column",{attrs:{prop:"create_time",label:"创建时间","min-width":"160"}}),n("el-table-column",{attrs:{label:"状态","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return t.changeStatus(e.row)}},model:{value:e.row.mg_state,callback:function(n){t.$set(e.row,"mg_state",n)},expression:"scope.row.mg_state"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(n){return t.doEdit("edit",e.row,"编辑用户")}}}),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){return t.doRemove(e.row)}}}),n("el-tooltip",{attrs:{placement:"bottom",content:"分配角色",effect:"dark"}},[n("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(n){return t.doEdit("set",e.row,"分配角色")}}})],1)]}}])})],1)],1)],1),n("el-row",[n("el-col",{staticClass:"text-right",attrs:{span:24}},[n("el-pagination",{attrs:{"current-page":t.params.pagenum,"page-sizes":t.pageSizeType,"page-size":t.params.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t.dialog.edit.show?n("el-dialog",{attrs:{title:t.dialog.edit.title,visible:t.dialog.edit.show,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialog.edit,"show",e)}}},[n("edit-user",{attrs:{model:t.dialog.edit.data},on:{editEmit:function(e){return t.editEmit("edit")},close:function(e){t.dialog.edit.show=!1}}})],1):t._e(),t.dialog.set.show?n("el-dialog",{attrs:{title:t.dialog.set.title,visible:t.dialog.set.show,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialog.set,"show",e)}}},[n("set-user",{attrs:{model:t.dialog.set.data},on:{editEmit:function(e){return t.editEmit("set")},close:function(e){t.dialog.set.show=!1}}})],1):t._e()],1)},a=[],o=(n("d3b7"),n("2612")),r={name:"users",data:function(){return{params:{query:"",pagenum:1,pagesize:2},userList:[],dialog:{edit:{title:"",data:{},show:!1},set:{title:"",data:{},show:!1}}}},components:{"edit-user":function(){return n.e("chunk-4f4f76f9").then(n.bind(null,"d344"))},"set-user":function(){return n.e("chunk-e3c6e1ee").then(n.bind(null,"26c8"))}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(o["g"])(this.params).then((function(e){var n=e.data;t.userList=n.data.users,t.pagination.total=n.data.total}))},doCreate:function(){this.dialog.edit.show=!0,this.dialog.edit.data={},this.dialog.edit.title="创建用户"},doEdit:function(t,e,n){var i=this;Object(o["f"])(e.id).then((function(a){i.dialog[t].show=!0,i.dialog[t].data=e,i.dialog[t].title=n}))},doRemove:function(t){var e=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["c"])({id:t.id}).then((function(t){e.$message({type:"success",message:t.data.meta.msg}),e.getList()}))}))},editEmit:function(t){this.dialog[t].show=!1,this.getList()},changeStatus:function(t){var e=this;Object(o["a"])({id:t.id,mg_state:t.mg_state}).then((function(t){var n=t.data;e.$message.success(n.meta.msg)}))}}},l=r,s=n("2877"),c=Object(s["a"])(l,i,a,!1,null,null,null);e["default"]=c.exports},"22cd":function(t,e,n){"use strict";var i=n("6979"),a=n.n(i);a.a},2612:function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"b",(function(){return r})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return u}));n("99af");var i=n("b775");function a(t){return Object(i["a"])({url:"/users",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/users/".concat(t),method:"get",params:t})}function r(t){return Object(i["a"])({url:"/users",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/users/".concat(t.id),method:"put",data:t})}function s(t){return Object(i["a"])({url:"/users/".concat(t.id,"/state/").concat(t.mg_state),method:"put",data:t})}function c(t){return Object(i["a"])({url:"/users/".concat(t.id),method:"delete"})}function u(t){return Object(i["a"])({url:"/users/".concat(t.id,"/role"),method:"put",data:t})}},"2ef9":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var i=n("b775");function a(t){return Object(i["a"])({url:"/rights/list",method:"get",params:t})}function o(t){return Object(i["a"])({url:"/rights/tree",method:"get",params:t})}},"5c1d":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v("权限管理")]),n("el-breadcrumb-item",[t._v("权限列表")])],1),n("el-card",[n("el-table",{attrs:{data:t.rightsList,"highlight-current-row":"",border:"",height:t.tableHeight+92}},[n("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),n("el-table-column",{attrs:{prop:"authName",label:"权限名称","min-width":"120"}}),n("el-table-column",{attrs:{prop:"path",label:"权限路径","min-width":"120"}}),n("el-table-column",{attrs:{prop:"level",label:"权限等级","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:t.tagList[e.row.level]}},[t._v(t._s(t.tagNameList[e.row.level]))])]}}])})],1)],1)],1)},a=[],o=n("2ef9"),r={name:"",data:function(){return{rightsList:[],tagList:["","success","info"],tagNameList:["一级","二级","三级"]}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(o["a"])().then((function(e){var n=e.data;t.rightsList=n.data}))}}},l=r,s=n("2877"),c=Object(s["a"])(l,i,a,!1,null,"88d74588",null);e["default"]=c.exports},6134:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v("权限管理")]),n("el-breadcrumb-item",[t._v("角色列表")])],1),n("el-card",[n("el-row",{staticClass:"mb-20",attrs:{gutter:20}},[n("el-col",{attrs:{span:24}},[n("el-button",{attrs:{type:"primary"},on:{click:t.doCreate}},[t._v("添加角色")])],1)],1),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-table",{attrs:{data:t.rolesList,"highlight-current-row":"",border:"",height:t.tableHeight+52}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.children,(function(i,a){return n("el-row",{key:a,class:["bdbottom",0===a?"bdtop":"","a-center"]},[n("el-col",{attrs:{span:6}},[n("el-tag",{attrs:{closable:!(i.children.length>0)},on:{close:function(n){return t.doRemoveRight(e.row,i)}}},[t._v(t._s(i.authName))]),n("i",{staticClass:"el-icon-caret-right"})],1),n("el-col",{attrs:{span:18}},t._l(i.children,(function(i,a){return n("el-row",{key:a,class:[0===a?"":"bdtop","a-center"]},[n("el-col",{attrs:{span:6}},[n("el-tag",{attrs:{type:"success",closable:!(i.children.length>0)},on:{close:function(n){return t.doRemoveRight(e.row,i)}}},[t._v(t._s(i.authName))]),n("i",{staticClass:"el-icon-caret-right"})],1),n("el-col",{attrs:{span:18}},t._l(i.children,(function(i,a){return n("el-tag",{key:a,attrs:{type:"warning",closable:""},on:{close:function(n){return t.doRemoveRight(e.row,i)}}},[t._v(t._s(i.authName))])})),1)],1)})),1)],1)}))}}])}),n("el-table-column",{attrs:{type:"index"}}),n("el-table-column",{attrs:{prop:"roleName",label:"角色名称","min-width":"120"}}),n("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述","min-width":"120"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(n){return t.doEdit("edit",e.row,"编辑角色")}}}),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",disabled:e.row.children.length>0},on:{click:function(n){return t.doRemove(e.row)}}}),n("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(n){return t.doEdit("set",e.row,"分配权限")}}},[t._v("分配权限")])]}}])})],1)],1)],1)],1),t.dialog.edit.show?n("el-dialog",{attrs:{title:t.dialog.edit.title,visible:t.dialog.edit.show,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialog.edit,"show",e)}}},[n("edit-role",{attrs:{model:t.dialog.edit.data},on:{editEmit:function(e){return t.editEmit("edit")},close:function(e){t.dialog.edit.show=!1}}})],1):t._e(),t.dialog.set.show?n("el-dialog",{attrs:{title:t.dialog.set.title,top:"10vh",visible:t.dialog.set.show,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.dialog.set,"show",e)}}},[n("set-role",{attrs:{model:t.dialog.set.data},on:{editEmit:function(e){return t.editEmit("set")},close:function(e){t.dialog.set.show=!1}}})],1):t._e()],1)},a=[],o=(n("d3b7"),n("a8f7")),r={name:"roles",data:function(){return{params:{query:"",pagenum:1,pagesize:2},rolesList:[],total:3,dialog:{edit:{title:"",data:{},show:!1},set:{title:"",data:{},show:!1}}}},components:{"edit-role":function(){return n.e("chunk-49c08699").then(n.bind(null,"70e5"))},"set-role":function(){return n.e("chunk-c7694c2e").then(n.bind(null,"273f"))}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(o["d"])(this.params).then((function(e){var n=e.data;t.rolesList=n.data}))},doCreate:function(){this.dialog.edit.show=!0,this.dialog.edit.data={},this.dialog.edit.title="创建角色"},doEdit:function(t,e,n){this.dialog[t].show=!0,this.dialog[t].data=e,this.dialog[t].title=n},doRemoveRight:function(t,e){var n=this;this.$confirm("是否确认取消该权限?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["e"])({roleId:t.id,rightId:e.id}).then((function(e){n.$message({type:"success",message:e.data.meta.msg}),t.children=e.data.data}))}))},doRemove:function(t){var e=this;this.$confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])({id:t.id}).then((function(t){e.$message({type:"success",message:t.data.meta.msg}),e.getList()}))}))},editEmit:function(t){this.dialog[t].show=!1,this.getList()}}},l=r,s=(n("22cd"),n("2877")),c=Object(s["a"])(l,i,a,!1,null,"40f4a93f",null);e["default"]=c.exports},6979:function(t,e,n){},a8f7:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return c}));n("99af");var i=n("b775");function a(t){return Object(i["a"])({url:"/roles",method:"get",params:t})}function o(t,e){return Object(i["a"])({url:"/roles/".concat(t,"/rights"),method:"post",data:e})}function r(t){return Object(i["a"])({url:"/roles",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/roles/".concat(t.id),method:"put",data:t})}function s(t){return Object(i["a"])({url:"/roles/".concat(t.id),method:"delete"})}function c(t){return Object(i["a"])({url:"/roles/".concat(t.roleId,"/rights/").concat(t.rightId),method:"delete"})}}}]);
//# sourceMappingURL=Users-Roles-Rights.16850157.js.map